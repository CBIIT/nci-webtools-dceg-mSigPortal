import { createSlice } from '@reduxjs/toolkit';
import { mergeObject } from './utils';

export const getInitialState = () => ({
  exploration: {
    displayTab: 'etiology',
    signatureDisplay: 'referenceSignatures',
    exposureSignature: [],
    exposureCancer: [],
    refSigData: [],
    projectID: '',
    submitted: false,
  },
  aetiology: {
    category: 'Cosmic Mutational Signatures',
    aetiology: 'APOBEC activity',
    signature: '',
    tissue: '',
    refSig: '',
    study: 'PCAWG',
    all: false,
    data: [],
    thumbnails: [],
    tissueThumbnails: [],
    refSigThumbnails: [],
    selectedSource: '',
    profileURL: '',
    exposureURL: '',
    tissueURL: '',
    refSigURL: '',
  },
  sigRefSig: {
    plotPath: 'assets/images/mSigPortalReferenceSignatures.svg',
    debugR: '',
    err: '',
    loading: false,
  },
  sigMutationalProfiles: {
    plots: [
      {
        signatureSource: '',
        signatureSourceOptions: [],
        profileName: '',
        profileNameOptions: [],
        refSignatureSet: '',
        refSignatureSetOptions: [],
        strategy: '',
        strategyOptions: [],
        signatureName: '',
        signatureNameOptions: [],
        plotPath: '',
      },
    ],
    debugR: '',
    err: '',
    loading: false,
  },
  sigCosineSimilarity: {
    profileName: '',
    profileNameOptions: [],
    refSignatureSet1: '',
    refSignatureSet2: '',
    refSignatureSetOptions1: [],
    refSignatureSetOptions2: [],
    plotPath: '',
    txtPath: '',
    debugR: '',
    err: '',
    loading: false,
  },
  sigMutationalSigComparison: {
    profileName: '',
    profileNameOptions: [],
    refSignatureSet1: '',
    refSignatureSetOptions1: [],
    refSignatureSet2: '',
    refSignatureSetOptions2: [],
    signatureName1: '',
    signatureNameOptions1: [],
    signatureName2: '',
    signatureNameOptions2: [],
    plotPath: '',
    debugR: '',
    err: '',
    loading: false,
  },
  exposure: {
    study: '',
    studyOptions: [],
    strategy: '',
    strategyOptions: [],
    cancer: '',
    cancerOptions: [],
    refSigData: [],
    refSignatureSet: '',
    refSignatureSetOptions: [],
    useCancerType: true,
    signatureNameOptions: [],
    userNameOptions: [],
    publicSampleOptions: [],
    userSampleOptions: [],
    genome: 'GRCh37',
    genomeOptions: ['GRCh37', 'GRCh38', 'mm10'],
    exposureFile: '',
    matrixFile: '',
    signatureFile: '',
    usePublicSignature: true,
    source: 'public',
    display: 'tmb',
    loading: false,
    loadingMsg: null,
    projectID: '',
    openSidebar: true,
    submitted: false,
    submitAll: false,
    gettingSignatureNames: false,
    gettingSampleNames: false,
  },
  tmb: {
    plotPath: '',
    debugR: '',
    err: '',
    loading: false,
  },
  tmbSignatures: {
    plotPath: '',
    plotURL: '',
    debugR: '',
    err: '',
    loading: false,
  },
  msBurden: {
    signatureName: '',
    plotPath: '',
    debugR: '',
    err: '',
    loading: false,
  },
  msAssociation: {
    both: true,
    signatureName1: '',
    signatureName2: '',
    plotPath: '',
    txtPath: '',
    debugR: '',
    err: '',
    loading: false,
  },
  msDecomposition: {
    plotPath: '',
    txtPath: '',
    debugR: '',
    err: '',
    loading: false,
  },
  msLandscape: {
    variableFile: '',
    plotPath: '',
    txtPath: '',
    debugR: '',
    err: '',
    loading: false,
  },
  msPrevalence: {
    mutation: '100',
    plotPath: '',
    debugR: '',
    err: '',
    loading: false,
  },
  msIndividual: {
    sample: '',
    plotPath: '',
    debugR: '',
    err: '',
    loading: false,
  },
});

export const { actions, reducer } = createSlice({
  name: 'exploration',
  initialState: getInitialState(),
  reducers: {
    mergeExploration: mergeObject,
    resetExploration: getInitialState,
  },
});
